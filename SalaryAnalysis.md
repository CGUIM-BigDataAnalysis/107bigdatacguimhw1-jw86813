107-2 大數據分析方法 作業一
================
王瑄

搞不清楚各行各業的薪資差異嗎? 念研究所到底對第一份工作的薪資影響有多大? CP值高嗎? 透過分析**初任人員平均經常性薪資**-
[開放資料連結](https://data.gov.tw/dataset/6647)，可初步了解台灣近幾年各行各業、各學歷的起薪。

## 比較103年度和106年度大學畢業者的薪資資料

### 資料匯入與處理

``` r
library(dplyr)
library(readr)
X103 <- read_csv("103年各教育程度別初任人員經常性薪資─按大職類分.csv")
X104 <- read_csv("104年各教育程度別初任人員經常性薪資─按大職類分.csv")
X105 <- read_csv("105年各教育程度別初任人員每人每月經常性薪資─按大職類分.csv")
X106 <- read_csv("106年各教育程度別初任人員每人每月經常性薪資─按大職類分.csv")

names(X106)[names(X106)=="大學-薪資"]="106大學-薪資"
compare1<-inner_join(X103,X106,"大職業別") 

compare1$`106大學-薪資`<- as.numeric(compare1$`106大學-薪資`)
compare1$`大學-薪資`<- as.numeric(compare1$`大學-薪資`)
#將資料轉為numeric以便之後計算處理
```

### 106年度薪資較103年度薪資高的職業有哪些?

``` r
compare1<-mutate(compare1,
                 薪資差異比例=(compare1$`106大學-薪資`/compare1$`大學-薪資`))%>%
 filter(薪資差異比例>1) #篩選出106年薪資比103年高的職業
knitr::kable(compare1$大職業別)
```

| x                     |
| :-------------------- |
| 工業及服務業部門              |
| 工業及服務業部門-專業人員         |
| 工業及服務業部門-技術員及助理專業人員   |
| 工業及服務業部門-事務支援人員       |
| 工業及服務業部門-服務及銷售工作人員    |
| 工業部門                  |
| 工業部門-專業人員             |
| 工業部門-技術員及助理專業人員       |
| 工業部門-事務支援人員           |
| 工業部門-服務及銷售工作人員        |
| 礦業及土石採取業-專業人員         |
| 製造業                   |
| 製造業-專業人員              |
| 製造業-技術員及助理專業人員        |
| 製造業-事務支援人員            |
| 製造業-服務及銷售工作人員         |
| 電力及燃氣供應業-服務及銷售工作人員    |
| 用水供應及污染整治業            |
| 用水供應及污染整治業-專業人員       |
| 用水供應及污染整治業-技術員及助理專業人員 |
| 用水供應及污染整治業-事務支援人員     |
| 用水供應及污染整治業-服務及銷售工作人員  |
| 營造業                   |
| 營造業-專業人員              |
| 營造業-技術員及助理專業人員        |
| 營造業-事務支援人員            |
| 營造業-服務及銷售工作人員         |
| 服務業部門                 |
| 服務業部門-專業人員            |
| 服務業部門-技術員及助理專業人員      |
| 服務業部門-事務支援人員          |
| 服務業部門-服務及銷售工作人員       |
| 批發及零售業                |
| 批發及零售業-專業人員           |
| 批發及零售業-技術員及助理專業人員     |
| 批發及零售業-事務支援人員         |
| 批發及零售業-服務及銷售工作人員      |
| 運輸及倉儲業                |
| 運輸及倉儲業-專業人員           |
| 運輸及倉儲業-技術員及助理專業人員     |
| 運輸及倉儲業-事務支援人員         |
| 運輸及倉儲業-服務及銷售工作人員      |
| 住宿及餐飲業                |
| 住宿及餐飲業-專業人員           |
| 住宿及餐飲業-技術員及助理專業人員     |
| 住宿及餐飲業-事務支援人員         |
| 住宿及餐飲業-服務及銷售工作人員      |
| 資訊及通訊傳播業              |
| 資訊及通訊傳播業-專業人員         |
| 資訊及通訊傳播業-技術員及助理專業人員   |
| 資訊及通訊傳播業-事務支援人員       |
| 資訊及通訊傳播業-服務及銷售工作人員    |
| 金融及保險業                |
| 金融及保險業-專業人員           |
| 金融及保險業-技術員及助理專業人員     |
| 金融及保險業-事務支援人員         |
| 金融及保險業-服務及銷售工作人員      |
| 不動產業-專業人員             |
| 支援服務業                 |
| 支援服務業-專業人員            |
| 支援服務業-技術員及助理專業人員      |
| 支援服務業-事務支援人員          |
| 支援服務業-服務及銷售工作人員       |
| 教育服務業                 |
| 教育服務業-專業人員            |
| 教育服務業-技術員及助理專業人員      |
| 教育服務業-事務支援人員          |
| 教育服務業-服務及銷售工作人員       |
| 醫療保健服務業               |
| 醫療保健服務業-專業人員          |
| 醫療保健服務業-技術員及助理專業人員    |
| 醫療保健服務業-事務支援人員        |
| 醫療保健服務業-服務及銷售工作人員     |
| 其他服務業                 |
| 其他服務業-專業人員            |
| 其他服務業-技術員及助理專業人員      |
| 其他服務業-事務支援人員          |

### 提高超過5%的的職業有哪些?

``` r
result<-filter(compare1,薪資差異比例>=1.05)%>%
  select("大職業別",薪資差異比例)%>%
  arrange(desc(薪資差異比例))
  #篩選出106年薪資比103年提高超過5%的職業並按增加比例排序

knitr::kable(head(result,10))
```

| 大職業別                  |  薪資差異比例  |
| :-------------------- | :------: |
| 其他服務業-技術員及助理專業人員      | 1.131278 |
| 住宿及餐飲業-服務及銷售工作人員      | 1.129498 |
| 用水供應及污染整治業-技術員及助理專業人員 | 1.129402 |
| 營造業-服務及銷售工作人員         | 1.109005 |
| 其他服務業-專業人員            | 1.103448 |
| 資訊及通訊傳播業-專業人員         | 1.103263 |
| 不動產業-專業人員             | 1.097758 |
| 教育服務業-事務支援人員          | 1.095684 |
| 住宿及餐飲業-技術員及助理專業人員     | 1.092693 |
| 其他服務業-事務支援人員          | 1.089846 |

### 主要的職業種別是哪些種類呢?

``` r
result$大職業別<-substr(result$大職業別,
                        start=1,stop=regexpr("業",result$大職業別))
knitr::kable(sort(table(result$大職業別),decreasing = T))  #計算薪資提高比例>5%的職業的數量
```

| Var1       | Freq |
| :--------- | ---: |
| 教育服務業      |    5 |
| 用水供應及污染整治業 |    5 |
| 資訊及通訊傳播業   |    5 |
| 其他服務業      |    4 |
| 服務業        |    4 |
| 住宿及餐飲業     |    3 |
| 營造業        |    3 |
| 運輸及倉儲業     |    3 |
| 工業         |    2 |
| 支援服務業      |    2 |
| 不動產業       |    1 |
| 製造業        |    1 |
| 醫療保健服務業    |    1 |
| 金融及保險業     |    1 |
| 電力及燃氣供應業   |    1 |

可以從結果看出四年內增加幅度最高的職業種別為：教育服務業、用水供應及污染整治業、資訊及通訊傳播業 。

## 男女同工不同酬現況分析

男女同工不同酬一直是性別平等中很重要的問題，分析資料來源為103到106年度的大學畢業薪資。

### 103到106年度的大學畢業薪資資料，哪些行業男生薪資比女生薪資多?

``` r
salaryvs<-select(X103,"大職業別")%>%
  mutate(vs103=X103$`專科-女/男`,vs104=X104$`大學-女/男`,
         vs105=X105$`大學-女/男`,vs106=X106$`大學-女/男`,)
salaryvs$vs103<-as.numeric(salaryvs$vs103)
salaryvs$vs104<-as.numeric(salaryvs$vs104)
salaryvs$vs105<-as.numeric(salaryvs$vs105)
salaryvs$vs106<-as.numeric(salaryvs$vs106)
salaryvs$四年平均<-rowMeans(salaryvs[,2:5],na.rm = T) 
#新增一欄位計算四年男女薪資比例的平均值

manwin<-arrange(salaryvs,四年平均) #女/男比例越小代表男比女薪資比例多越多
knitr::kable(head(manwin,10))
```

| 大職業別                    | vs103 | vs104 |  vs105 | vs106 |  四年平均   |
| :---------------------- | ----: | ----: | -----: | ----: | :-----: |
| 教育服務業-技藝、機械設備操作及組裝人員    | 88.49 |    NA |     NA |    NA | 88.4900 |
| 電力及燃氣供應業-技藝、機械設備操作及組裝人員 | 95.60 | 91.69 |  98.20 | 95.51 | 95.2500 |
| 其他服務業-技術員及助理專業人員        | 89.46 | 98.94 |  99.37 | 96.84 | 96.1525 |
| 礦業及土石採取業                | 94.64 | 95.28 |  97.70 | 97.41 | 96.2575 |
| 營造業                     | 96.29 | 96.35 |  95.78 | 96.71 | 96.2825 |
| 礦業及土石採取業-技藝、機械設備操作及組裝人員 | 96.71 | 93.10 |  99.18 | 96.91 | 96.4750 |
| 其他服務業                   | 95.95 | 96.84 |  96.72 | 96.57 | 96.5200 |
| 其他服務業-事務支援人員            | 97.48 | 95.47 |  97.48 | 96.23 | 96.6650 |
| 礦業及土石採取業-服務及銷售工作人員      | 93.35 |    NA | 100.00 |    NA | 96.6750 |
| 運輸及倉儲業-事務支援人員           | 96.28 | 96.95 |  96.89 | 96.83 | 96.7375 |

### 哪些行業女生薪資比男生薪資多?

``` r
womanwin<-arrange(salaryvs,desc(四年平均)) #大到小排，越大代表差異越小，比例>100則代表女生薪資比男生高
knitr::kable(head(womanwin,10))
```

| 大職業別                       |  vs103 |  vs104 |  vs105 |  vs106 |   四年平均    |
| :------------------------- | -----: | -----: | -----: | -----: | :-------: |
| 用水供應及污染整治業-服務及銷售工作人員       | 100.00 | 100.00 | 100.00 | 100.00 | 100.00000 |
| 醫療保健服務業-服務及銷售工作人員          |  99.72 | 100.00 |  99.74 |  99.88 | 99.83500  |
| 其他服務業-專業人員                 |     NA | 100.00 |  99.46 |     NA | 99.73000  |
| 金融及保險業-服務及銷售工作人員           | 100.00 |  98.93 |  99.84 |  99.92 | 99.67250  |
| 用水供應及污染整治業-技術員及助理專業人員      |  99.22 |  99.78 |  99.98 |  99.61 | 99.64750  |
| 專業、科學及技術服務業-技藝、機械設備操作及組裝人員 |  98.46 | 100.26 |  99.83 | 100.00 | 99.63750  |
| 金融及保險業-技術員及助理專業人員          |  99.25 |  99.65 |  99.89 |  99.70 | 99.62250  |
| 金融及保險業-專業人員                |     NA |  99.28 | 100.11 |  99.47 | 99.62000  |
| 運輸及倉儲業-專業人員                |     NA |  99.25 |  99.32 |  99.83 | 99.46667  |
| 不動產業-專業人員                  |     NA |  98.63 |  99.70 | 100.00 | 99.44333  |

新增一欄位計算四年男女薪資比例的平均值，女/男比例越小代表男比女薪資比例多越多。
接著將女/男比例從大到小排，越大代表差異越小，比例\>100則代表女生薪資比男生高
可以從結果看出，女生最多就跟男生一樣多，沒有比男生薪水高的職業。

## 研究所薪資差異

以106年度的資料來看，哪個職業別念研究所最划算呢 (研究所學歷薪資與大學學歷薪資增加比例最多)?

``` r
X106$`106大學-薪資`<-as.numeric(X106$`106大學-薪資`)
X106$`研究所及以上-薪資`<-as.numeric(X106$`研究所及以上-薪資`)
X106<-mutate(X106,薪資比例=`研究所及以上-薪資`/`106大學-薪資` )%>%
  select("大職業別","106大學-薪資","研究所及以上-薪資",薪資比例)%>%
  arrange(desc(薪資比例)) #新增一欄位計算研究所與大學薪資比並按大到小排序

knitr::kable(head(X106,10))
```

| 大職業別                | 106大學-薪資 | 研究所及以上-薪資 |   薪資比例   |
| :------------------ | :------: | :-------: | :------: |
| 礦業及土石採取業-事務支援人員     |  24815   |   30000   | 1.208946 |
| 專業\_科學及技術服務業        |  29648   |   35666   | 1.202982 |
| 其他服務業-技術員及助理專業人員    |  27929   |   33500   | 1.199470 |
| 專業\_科學及技術服務業-事務支援人員 |  27035   |   32234   | 1.192306 |
| 批發及零售業              |  27611   |   32910   | 1.191916 |
| 製造業                 |  28155   |   33458   | 1.188350 |
| 藝術\_娛樂及休閒服務業-事務支援人員 |  24970   |   29657   | 1.187705 |
| 工業部門                |  28263   |   33448   | 1.183455 |
| 工業及服務業部門            |  28446   |   33633   | 1.182346 |
| 服務業部門               |  28715   |   33922   | 1.181334 |

新增一欄位計算研究所與大學薪資比並按大到小排序，薪資比例越高代表讀研究所的對薪水的feedback越高，其中讀研最划算的職業為：礦業及土石採取業-事務支援人員。

## 我有興趣的職業別薪資狀況分析

我有興趣的職業類別：資訊及通訊傳播業、藝術\_娛樂及休閒服務業-專業人員、工業部門-專業人員、營造業、運輸及倉儲業。

### 有興趣的職業別篩選，呈現薪資

``` r
myfav<-filter(X106,大職業別%in% c("資訊及通訊傳播業",
                                "藝術_娛樂及休閒服務業-專業人員",
                                "工業部門-專業人員","營造業",
                                "運輸及倉儲業") )
```

休閒服務業專案的大學畢業薪資比我想像中薪資要高，其他薪資與想像中差不多。

### 這些職業別研究所薪資與大學薪資差多少呢？

``` r
myfav<-mutate(myfav,diff=(`研究所及以上-薪資`- `106大學-薪資` ))
knitr::kable(myfav)
```

| 大職業別              | 106大學-薪資 | 研究所及以上-薪資 |   薪資比例   | diff |
| :---------------- | :------: | :-------: | :------: | ---: |
| 資訊及通訊傳播業          |  29198   |   33944   | 1.162545 | 4746 |
| 工業部門-專業人員         |  31775   |   36640   | 1.153108 | 4865 |
| 營造業               |  28952   |   33210   | 1.147071 | 4258 |
| 運輸及倉儲業            |  29808   |   33298   | 1.117083 | 3490 |
| 藝術\_娛樂及休閒服務業-專業人員 |  30071   |   31711   | 1.054538 | 1640 |

可以看出除了休閒服務業讀研對薪資提升沒什麼幫助外，其他四個理工類工作研究所畢業之薪資至少都提升15%左右，果然工學院還是要去唸一下研究所，所以我還是會繼續升學。
